---
title: 【 CSS 】自适应布局
date: 2016-11-26 20:31:00
tags: CSS
---
## CSS 中的定位机制

CSS中有三种基本的定位机制：**普通流、浮动和绝对定位**。

### 普通流
默认情况下，所有框都在普通流中定位。按照你所写的html，顺序的排列，块级元素从上到下一个接一个地排列；块级元素之间的垂直距离由其定义的margin-top，margin-bottom决定。行内元素则在一行中水平布置。利用margin-left/right，padding-left/right，来调整它们之间的水平距离。

### 相对定位
position:relative;如果一个元素的设置该属性为relative，那么就激活了该元素left和top属性，利用这两个属性，该元素就相对于它自身原本在普通文档流中的位置进行偏移，但无论如何进行移动，元素仍然占据原来的空间，仍然属于普通流。

### 绝对定位
position:absolute; 绝对定位使元素的位置与文档流无关，因此不占据空间。普通文档流中的其他元素在布局的时候就像绝对定位的元素不存在时一样,绝对定位的元素的位置是相对于最近的已定位祖先元素(position:relative/absolute)。如果元素没有已定位的祖先元素，那么它的位置相对于最初的包含块.同时因为绝对定位的框与文档流无关，所以它们可以覆盖页面上的其他元素。可以通过设置z-index属性来控制这些框的堆放次序。z-index值越高，框在堆中的位置就越高

### 浮动模型
浮动的元素脱离普通文档流，向左或者向右移动，直到它的边缘碰到包含框或者另一个浮动框的边缘。因为浮动框不在文档的普通流中，所以文档的普通流中的块框表现得就像浮动框不存在一样
左固定右自适应宽度，上固定下固定中间自适应高度等等布局要求。

关于左右自适应的，不低于10种解决方案，还要看dom结构要求是并列还是嵌套，是否允许有父级元素，是否允许使用CSS3，是否有背景色，是否要两列等高，等等

而关于自适应高度的解决方案就略少一些，大致也是靠 CSS3的calc属性，内padding，绝对定位后拉伸，动态js计算等等解决方案，同样也是要看应用场景能用哪个

**有一个高度自适应的div，里面有两个div，一个高度100px，希望另一个填满剩下的高度。**


一般来说，布局有两大类方法，第一是使用 CSS3 之前的 position 和 float 进行布局；第二类是使用 CSS3 中新增的布局方法，包括多栏布局、盒模型布局和弹性盒模型布局。
CSS3的多栏布局和和模型布局存在一些兼容性问题但是实现相对简单。

# Float 布局
布局的基本 HTML 元素 div，有几个特点（仅适用于没有指定高度和宽度属性的div）：
1. 空的 div 是没有高度的；
2. 有内容的 div 其高度取决于内容的高度；
3. 没有指定 float 属性，div 的宽度将占满父元素的宽度（不管是不是空的）；
4. 如果指定了 float 属性，div的宽度将取决于内部元素的宽度（因此，空的 div 指定了 float 属性后既没有高度也没有宽度）。

div 是按照在 HTML 文档中的顺序进行渲染的，也就是说，我们先决定前一个 div 在页面上的位置，然后再决定后一个 div 的位置。

当一个元素具有float属性时，浏览器会怎样做？我想是这样的：

渲染浏览器探测到这个元素具有float:right属性，
**根据其内容限制了div的宽度（而不是尽量占满父元素宽度）
脱离文档流**，并选择这样的位置进行渲染：
**首先要在文档流没有占领的区域，否则就有可能覆盖已经渲染的文档。
其次，也没有其他float元素。
最后，渲染之后不会影响文档流。文档流该怎么走还怎么走，但是文档中的内容会自动绕开float元素。**

**三栏布局，两侧指定宽度，中间宽度自适应**
```
<div id="sidebar">
	<p>侧栏1</p>
</div>
<div id="sidebar2">
	<p>侧栏2</p>
</div>
<div id="content">
	<p>自适应宽度正文内容……</p>
</div>

// 常用技巧（注意 html三栏的顺序）
#sidebar{
	float: left;
	width: 160px;
}
#sidebar2{
	float: right;
	width: 200px;
}
#content{
	margin-left: 160px;
	margin-right: 200px;
}
注意：高度随着各部分内容自适应。
```

**两列布局，左侧自适应，右侧固定宽度**

```
<div class="content">
	<div class="left">自适应宽度</div>
	<div class="right">宽度固定 200px</div>
</div>

// 方法一：使用position，两栏与父元素等高
// 问题：指定父元素高度，内容会超出
.content{
	height: 200px;
	position: relative;
	border: none;
}
.left{
	position: absolute;
	left: 0px;
	top: 0px;
	right: 210px;
	bottom: 0px;
	border: 1px solid purple;
}
.right{
	position: absolute;
	width: 200px;
	right: 0px;
	top: 0px;
	bottom: 0px;
	border: 1px solid black;
}

// 方法二：使用 CSS3 多栏布局
```












